(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{29:function(e,t,a){e.exports=a(58)},34:function(e,t,a){},57:function(e,t,a){},58:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),o=a(23),l=a.n(o),s=(a(34),a(35),a(24)),i=a(9),c=a(10),u=a(12),m=a(11),d=a(13),h=a(60),f=a(61),p=a(62),v=a(63),g=a(64),y=a(65),b=a(14),E=a.n(b),w=a(59),k=r.a.memo(function(e){var t=e.winners;return r.a.createElement("div",{className:"dataTable"},r.a.createElement("h2",null,"Leader Board"),r.a.createElement(w.a,{bordered:!0},r.a.createElement("tbody",null,t.map(function(e){var t=e.winner,a=e.date,n=e.id;return r.a.createElement("tr",{key:n},r.a.createElement("td",null,t),r.a.createElement("td",null,a))}))))}),S=a(27),M=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).timer=function(){var e=a.state,t=e.squares,n=e.computerScores,r=e.userScores,o=e.clicked,l=e.highlight,s=a.props,i=s.field,c=s.userName,u=s.onShowMessage,m=(Math.pow(i,2)/2).toFixed(),d=t[Math.floor(Math.random()*t.length)],h=function(e,t){clearInterval(a.intervalId),a.myRef[l].style.backgroundColor=t,u(e)};if(n>=m)h("Computer","red");else if(r>=m)h(c,"green");else{a.myRef[d].style.backgroundColor="blue";var f=!0,p=!1,v=void 0;try{for(var g,y=t[Symbol.iterator]();!(f=(g=y.next()).done);f=!0){var b=g.value;t[b]===d&&t.splice(b,1)}}catch(E){p=!0,v=E}finally{try{f||null==y.return||y.return()}finally{if(p)throw v}}a.setState({highlight:d,squares:t,clicked:!1}),o||(a.setState({computerScores:n+1}),l&&(a.myRef[l].style.backgroundColor="red"))}},a.myRef=[],a.state={squares:Array.from(Array(Math.pow(e.field,2)),function(e,t){return t}),userScores:0,computerScores:0,highlight:null,clicked:!1},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.delay;this.intervalId=setInterval(this.timer,e)}},{key:"componentDidUpdate",value:function(e){var t=this.props,a=t.start,n=t.delay,r=t.field;if(a&&a!==e.start){this.intervalId=setInterval(this.timer,n),this.setState({squares:Array.from(Array(Math.pow(r,2)),function(e,t){return t}),computerScores:0,userScores:0,highlight:null});for(var o=0;o<Math.pow(r,2);o++)this.myRef[o].style.backgroundColor="white"}}},{key:"componentWillUnmount",value:function(){clearInterval(this.intervalId)}},{key:"handleClick",value:function(e){var t=this.state,a=t.userScores;e===t.highlight&&(this.myRef[e].style.backgroundColor="green",this.setState({userScores:a+1,clicked:!0}))}},{key:"renderSquares",value:function(e){var t=this;return Object(S.a)(Array(Math.pow(e,2))).map(function(a,n){return r.a.createElement("div",{className:"game-cell",key:n,style:{flexBasis:"".concat(100/e,"%")},ref:function(e){return t.myRef[n]=e,!0},onClick:function(){return t.handleClick(n)}},r.a.createElement("div",{className:"game-item"}))})}},{key:"render",value:function(){var e=this.props.field;return r.a.createElement("div",{className:"game-container",style:{maxWidth:"".concat(5===e?"320px":10===e?"480px":"640px")}},this.renderSquares(e))}}]),t}(n.Component),C=(a(57),function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={userName:"",selectMode:"",message:"",buttonText:"Play",winners:[],settings:{},field:null,delay:null,start:!1,disabled:!1},a.handleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(s.a)({},n,r))},a.showMessage=function(e){var t=new Date,n=t.getFullYear(),r=t.getMonth(),o=t.getDate(),l=t.getHours(),s=t.getMinutes(),i="".concat(l,":").concat(s,"; ").concat(o," ").concat(["January","February","March","April","May","June","July","August","September","October","November","December"][r]," ").concat(n);a.setState({message:"".concat(e," won"),buttonText:"Play Again",start:!1,disabled:!1}),E.a.post("https://12starnavi-frontend-test-task.herokuapp.com/winners",{winner:e,date:i},{headers:{Accept:"application/json","Content-Type":"application/json"}}).then(function(e){console.log(e),a.getWinners()})},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.getWinners(),E.a.get("https://starnavi-frontend-test-task.herokuapp.com/game-settings",{crossdomain:!0,headers:{"Access-Control-Allow-Origin":"*"}}).then(function(t){var a=t.data;e.setState({settings:a})})}},{key:"getWinners",value:function(){var e=this;E.a.get("https://starnavi-frontend-test-task.herokuapp.com/winners",{crossdomain:!0,headers:{"Access-Control-Allow-Origin":"*"}}).then(function(t){var a=t.data;e.setState({winners:a})})}},{key:"onSubmit",value:function(e){e.preventDefault();var t=this.state,a=t.userName,n=t.selectMode,r=t.settings;if(""!==a&&""!==n)for(var o in r)if(o===n){var l=r[o],s=l.field,i=l.delay;this.setState({field:s,delay:i,start:!0,disabled:!0,message:""})}}},{key:"render",value:function(){var e=this,t=this.state,a=t.winners,n=t.message,o=t.field,l=t.delay,s=t.userName,i=t.start,c=t.buttonText,u=t.disabled;return r.a.createElement("div",{className:"App"},r.a.createElement(h.a,null,r.a.createElement(f.a,{onSubmit:function(t){return e.onSubmit(t)},className:"mainForm"},r.a.createElement(p.a,{form:!0},r.a.createElement(v.a,{md:5,className:"mb-2"},r.a.createElement(g.a,{type:"select",name:"selectMode",onChange:function(t){return e.handleChange(t)}},r.a.createElement("option",{value:""},"Pick game mode"),r.a.createElement("option",{value:"easyMode"},"Easy"),r.a.createElement("option",{value:"normalMode"},"Normal"),r.a.createElement("option",{value:"hardMode"},"Hard"))),r.a.createElement(v.a,{md:5,className:"mb-2"},r.a.createElement(g.a,{type:"text",name:"userName",value:s,placeholder:"Enter your name",onChange:function(t){return e.handleChange(t)}})),r.a.createElement(v.a,{md:2},r.a.createElement(y.a,{disabled:u},c)))),r.a.createElement(p.a,null,r.a.createElement(v.a,null,r.a.createElement("div",{className:"message"},n.length>0&&r.a.createElement("h3",null,n)))),r.a.createElement(p.a,null,r.a.createElement(v.a,null,(o||l)&&r.a.createElement(M,{field:o,delay:l,userName:s,onShowMessage:this.showMessage,start:i}))),r.a.createElement(p.a,null,r.a.createElement(v.a,null,r.a.createElement(k,{winners:a})))))}}]),t}(n.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(C,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[29,1,2]]]);
//# sourceMappingURL=main.c1e74a46.chunk.js.map